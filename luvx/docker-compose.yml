
services:
  golang:
    # image: golang:1.23
    image: bitnami/golang:1.23
    container_name: golang
    networks:
      - net_common
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - $HOME/go/pkg/mod:/go/pkg/mod # GOPATH
      - $HOME/go/src:/go/src
    environment:
      - TZ=Asia/Shanghai
    tty: true # Enables debugging capabilities when attached to this container.
    command: ["sleep", "infinity"] # To keep the container running
    # command: ["tail", "-f", "/dev/null"] # To keep the container running

  rust:
    image: rust:1-slim
    container_name: rust
    networks:
      - net_common
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - TZ=Asia/Shanghai
    tty: true
    command: ["sleep", "infinity"]

  node:
    image: node:latest
    container_name: node
    networks:
      - net_common
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - TZ=Asia/Shanghai
    tty: true
    command: ["sleep", "infinity"]

  vscode:
    image: luvx/vscode:latest
    build:
      dockerfile: Dockerfile
    container_name: vscode
    ports:
      - 8000:8000
    networks:
      - net_common
    volumes:
      - $HOME/OneDrive/Code:/workspace
      - vscode_ext:/root/.vscode-server/extensions
    environment:
      - TZ=Asia/Shanghai
    tty: true
    command: code serve-web --host=0.0.0.0 --port=8000 --connection-token=xxxx

volumes:
  vscode_ext:

networks:
  net_common:
    external: true
